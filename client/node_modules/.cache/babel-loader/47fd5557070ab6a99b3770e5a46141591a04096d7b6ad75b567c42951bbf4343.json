{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useSelector}from'react-redux';import{Chart}from'react-chartjs-2';import{Chart as ChartJS,CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend}from'chart.js';import{groupByMonth}from'../../utils/formatters';import{VEHICLE_TYPES,CHART_COLORS}from'../../utils/constants';import'./Dashboard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend);const InventoryCount=()=>{const{data,status}=useSelector(state=>state.inventory);const[activeType,setActiveType]=useState(VEHICLE_TYPES.NEW);const[chartData,setChartData]=useState(null);useEffect(()=>{if(status==='succeeded'&&data.length>0){const groupedData=groupByMonth(data);const months=Object.keys(groupedData).sort((a,b)=>{const[aMonth,aYear]=a.split('/');const[bMonth,bYear]=b.split('/');if(aYear!==bYear)return aYear-bYear;return aMonth-bMonth;});const chartDatasets={labels:months,datasets:[{label:activeType,data:months.map(month=>groupedData[month][activeType]),backgroundColor:CHART_COLORS[activeType],borderWidth:0,borderRadius:4}]};setChartData(chartDatasets);}},[data,status,activeType]);const handleTypeChange=type=>{setActiveType(type);};if(status==='loading'){return/*#__PURE__*/_jsx(\"div\",{className:\"section\",children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"section\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"section-title\",children:\"Inventory Count\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"tabs\",children:[/*#__PURE__*/_jsx(\"div\",{className:`tab ${activeType===VEHICLE_TYPES.NEW?'active':''}`,onClick:()=>handleTypeChange(VEHICLE_TYPES.NEW),children:\"NEW\"}),/*#__PURE__*/_jsx(\"div\",{className:`tab ${activeType===VEHICLE_TYPES.USED?'active':''}`,onClick:()=>handleTypeChange(VEHICLE_TYPES.USED),children:\"USED\"}),/*#__PURE__*/_jsx(\"div\",{className:`tab ${activeType===VEHICLE_TYPES.CPO?'active':''}`,onClick:()=>handleTypeChange(VEHICLE_TYPES.CPO),children:\"CPO\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",children:chartData&&/*#__PURE__*/_jsx(Chart,{type:\"bar\",data:chartData,options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false},tooltip:{callbacks:{label:function(context){return`Count: ${context.raw}`;}}}},scales:{y:{beginAtZero:true,grid:{color:'#f0f0f0'}},x:{grid:{display:false}}}},height:300})})]});};export default InventoryCount;","map":{"version":3,"names":["React","useState","useEffect","useSelector","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","groupByMonth","VEHICLE_TYPES","CHART_COLORS","jsx","_jsx","jsxs","_jsxs","register","InventoryCount","data","status","state","inventory","activeType","setActiveType","NEW","chartData","setChartData","length","groupedData","months","Object","keys","sort","a","b","aMonth","aYear","split","bMonth","bYear","chartDatasets","labels","datasets","label","map","month","backgroundColor","borderWidth","borderRadius","handleTypeChange","type","className","children","onClick","USED","CPO","options","responsive","maintainAspectRatio","plugins","legend","display","tooltip","callbacks","context","raw","scales","y","beginAtZero","grid","color","x","height"],"sources":["E:/openSource/inventory-dashboard/client/src/components/Dashboard/InventoryCount.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Chart } from 'react-chartjs-2';\r\nimport { \r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n} from 'chart.js';\r\nimport { groupByMonth } from '../../utils/formatters';\r\nimport { VEHICLE_TYPES, CHART_COLORS } from '../../utils/constants';\r\nimport './Dashboard.css';\r\n\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\nconst InventoryCount = () => {\r\n  const { data, status } = useSelector(state => state.inventory);\r\n  const [activeType, setActiveType] = useState(VEHICLE_TYPES.NEW);\r\n  const [chartData, setChartData] = useState(null);\r\n  \r\n  useEffect(() => {\r\n    if (status === 'succeeded' && data.length > 0) {\r\n      const groupedData = groupByMonth(data);\r\n      const months = Object.keys(groupedData).sort((a, b) => {\r\n        const [aMonth, aYear] = a.split('/');\r\n        const [bMonth, bYear] = b.split('/');\r\n        \r\n        if (aYear !== bYear) return aYear - bYear;\r\n        return aMonth - bMonth;\r\n      });\r\n      \r\n      const chartDatasets = {\r\n        labels: months,\r\n        datasets: [\r\n          {\r\n            label: activeType,\r\n            data: months.map(month => groupedData[month][activeType]),\r\n            backgroundColor: CHART_COLORS[activeType],\r\n            borderWidth: 0,\r\n            borderRadius: 4,\r\n          }\r\n        ]\r\n      };\r\n      \r\n      setChartData(chartDatasets);\r\n    }\r\n  }, [data, status, activeType]);\r\n  \r\n  const handleTypeChange = (type) => {\r\n    setActiveType(type);\r\n  };\r\n  \r\n  if (status === 'loading') {\r\n    return <div className=\"section\">Loading...</div>;\r\n  }\r\n  \r\n  return (\r\n    <div className=\"section\">\r\n      <h3 className=\"section-title\">Inventory Count</h3>\r\n      \r\n      <div className=\"tabs\">\r\n        <div \r\n          className={`tab ${activeType === VEHICLE_TYPES.NEW ? 'active' : ''}`}\r\n          onClick={() => handleTypeChange(VEHICLE_TYPES.NEW)}\r\n        >\r\n          NEW\r\n        </div>\r\n        <div \r\n          className={`tab ${activeType === VEHICLE_TYPES.USED ? 'active' : ''}`}\r\n          onClick={() => handleTypeChange(VEHICLE_TYPES.USED)}\r\n        >\r\n          USED\r\n        </div>\r\n        <div \r\n          className={`tab ${activeType === VEHICLE_TYPES.CPO ? 'active' : ''}`}\r\n          onClick={() => handleTypeChange(VEHICLE_TYPES.CPO)}\r\n        >\r\n          CPO\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"chart-container\">\r\n        {chartData && (\r\n          <Chart \r\n            type=\"bar\" \r\n            data={chartData}\r\n            options={{\r\n              responsive: true,\r\n              maintainAspectRatio: false,\r\n              plugins: {\r\n                legend: {\r\n                  display: false\r\n                },\r\n                tooltip: {\r\n                  callbacks: {\r\n                    label: function(context) {\r\n                      return `Count: ${context.raw}`;\r\n                    }\r\n                  }\r\n                }\r\n              },\r\n              scales: {\r\n                y: {\r\n                  beginAtZero: true,\r\n                  grid: {\r\n                    color: '#f0f0f0'\r\n                  }\r\n                },\r\n                x: {\r\n                  grid: {\r\n                    display: false\r\n                  }\r\n                }\r\n              }\r\n            }}\r\n            height={300}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InventoryCount;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}